<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-36840CE8FY');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#14b8a6">
    <meta name="color-scheme" content="light">
    <title>GPX Combiner | Merge GPX & FIT Files for Strava and Komoot Upload</title>
    <meta name="description" content="Combine multiple GPX and FIT files into one for easy Strava and Komoot uploads. Merge Garmin, Wahoo, and other GPS tracks. Preview routes on map, download combined GPX instantly. Perfect for cyclists, runners, and hikers.">
    <meta name="keywords" content="gpx combiner, merge gpx files, combine fit files, strava upload, komoot upload, garmin gpx merge, wahoo fit combine, gps track combiner, cycling route merge, running track combine, hiking gpx merge, fit to gpx converter">
    <link rel="canonical" href="{{ app_domain }}/" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ app_domain }}/">
    <meta property="og:title" content="GPX Combiner | Merge GPX & FIT Files for Strava and Komoot Upload">
    <meta property="og:description" content="Combine multiple GPX and FIT files into one for easy Strava and Komoot uploads. Merge Garmin, Wahoo, and other GPS tracks instantly.">
    <meta property="og:image" content="{{ app_domain }}/static/logo.png">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ app_domain }}/">
    <meta property="twitter:title" content="GPX Combiner | Merge GPX & FIT Files for Strava and Komoot Upload">
    <meta property="twitter:description" content="Combine multiple GPX and FIT files into one for easy Strava and Komoot uploads. Merge Garmin, Wahoo, and other GPS tracks instantly.">
    <meta property="twitter:image" content="{{ app_domain }}/static/logo.png">
    <!-- Favicon & Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/static/logo.png">
    <link rel="apple-touch-icon" href="/static/logo.png">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/static/styles.css" as="style">
    <link rel="preload" href="/static/script.js" as="script">
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    
    <!-- Optimized local CSS with fallback -->
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        /* Inline fallback for critical glassmorphism styles */
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', system-ui, sans-serif; }
        .bg-gradient-to-br { 
            background: linear-gradient(135deg, #fef2f2 0%, #fef3c7 35%, #fed7aa 70%, #fecaca 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .card { 
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            position: relative;
            z-index: 1;
            animation: cardFloat 6s ease-in-out infinite;
        }
        @keyframes cardFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .flex-1 { flex: 1 1 0%; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .text-center { text-align: center; }
        .w-full { width: 100%; }
        .max-w-md { max-width: 28rem; }
        .max-w-2xl { max-width: 42rem; }
        .max-w-4xl { max-width: 56rem; }
        .rounded-2xl { border-radius: 1rem; }
        .p-8 { padding: 2rem; }
        .p-6 { padding: 1.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
        .mt-8 { margin-top: 2rem; }
        .mt-12 { margin-top: 3rem; }
        .mb-4 { margin-bottom: 1rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); }
        .border { border-width: 1px; border-style: solid; }
        .border-amber-100 { border-color: rgba(254, 243, 199, 0.7); }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .font-bold { font-weight: 700; }
        .text-rose-700 { color: #be123c; }
        .text-amber-700 { color: #b45309; }
        .grid { display: grid; }
        @media (min-width: 768px) { .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        .gap-8 { gap: 2rem; }
    </style>
    
    <!-- Leaflet CSS with integrity and defer -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    
    <!-- Leaflet JS with defer -->
    <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- Suppress styleMedia deprecation warning from Leaflet -->
    <script>
        // Override console.warn to filter out the styleMedia deprecation warning
        const originalWarn = console.warn;
        console.warn = function(...args) {
            const message = args.join(' ');
            if (message.includes('window.styleMedia is a deprecated draft version')) {
                return; // Suppress this specific warning
            }
            originalWarn.apply(console, args);
        };
    </script>

    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "GPX Combiner",
        "description": "Combine multiple GPX and FIT files into one for easy Strava and Komoot uploads. Merge Garmin, Wahoo, and other GPS tracks instantly.",
        "url": "{{ app_domain }}/",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Person",
            "name": "Twan Kerkhof",
            "url": "https://www.twankerkhof.nl"
        },
        "featureList": [
            "Combine multiple GPX files",
            "Convert FIT files to GPX",
            "Interactive map preview",
            "Strava upload ready",
            "Komoot compatible",
            "Support for Garmin, Wahoo, Polar devices",
            "Privacy-focused processing"
        ],
        "keywords": "gpx combiner, merge gpx files, combine fit files, strava upload, komoot upload, garmin gpx merge, wahoo fit combine, gps track combiner",
        "browserRequirements": "Requires JavaScript"
    }
    </script>
</head>
<body class="bg-gradient-to-br from-rose-50 via-amber-50 to-teal-100 min-h-screen flex flex-col">
    <main class="flex-1 flex flex-col items-center justify-center px-4 py-8">
        <div class="card bg-white/90 rounded-2xl p-8 w-full max-w-md flex flex-col items-center shadow-lg border border-amber-100">
            <header class="text-center">
                <img src="/static/logo.png" alt="GPX Combiner - Merge GPS tracks for Strava and Komoot" class="w-16 h-16 mx-auto mb-4" width="64" height="64">
                <h1 class="text-3xl font-bold text-rose-700 mb-2 tracking-tight">GPX Combiner</h1>
                <p class="text-amber-600 text-sm mb-4">Merge multiple GPX and FIT files into one track ready for Strava and Komoot upload. Perfect for combining Garmin, Wahoo, and other GPS device files.</p>
            </header>
            <div class="w-full flex flex-col gap-4">
                <label for="gpx-files" class="block text-sm font-medium text-rose-700">Add GPX or FIT files:</label>
                <input id="gpx-files" type="file" accept=".gpx,.fit" multiple class="block w-full text-gray-700 border border-rose-200 rounded-lg p-3 bg-rose-50 focus:border-amber-400 transition" />
                
                <!-- Track Combination Toggle (iOS-style) -->
                <div class="toggle">
                    <div style="display:flex; align-items:center; gap:8px;">
                        <span class="toggle-label">Combine into single track</span>
                        <span class="help-icon" aria-label="Help" role="img" data-tooltip="Single track: Merges all files into one continuous track, ideal for Strava/Komoot to treat as one activity. Multiple tracks: Keeps files separate; some platforms may import them as separate activities.">?
                        </span>
                    </div>
                    <div>
                        <input class="toggle-input" type="checkbox" id="single-track-toggle" checked>
                        <label class="toggle-switch" for="single-track-toggle"></label>
                    </div>
                </div>
            </div>
            <div id="file-list" class="w-full mt-6 mb-2 text-teal-700"></div>
            <button id="download-link" class="w-full bg-teal-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-amber-400 hover:text-teal-900 transition mt-2 disabled:opacity-50" disabled>Download Combined GPX</button>
            <p class="text-xs text-amber-600 mt-2 text-center">We do not store any personal data or .gpx/.fit file contents</p>
        </div>
        <div class="w-full max-w-2xl mt-8">
            <div class="border-b border-amber-200 mb-4"></div>
            <div id="map" class="h-64 rounded-2xl shadow border border-amber-100"></div>
        </div>
        
        <!-- SEO Content Section -->
        <div class="w-full max-w-4xl mt-12 px-4">
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card bg-white/90 rounded-2xl p-6 shadow-lg border border-amber-100">
                    <h3 class="text-xl font-bold text-rose-700 mb-4">üö¥ Perfect for Strava & Komoot</h3>
                    <ul class="space-y-2 text-amber-700">
                        <li>‚úÖ <strong>Strava Upload Ready:</strong> Combined GPX files upload seamlessly to Strava</li>
                        <li>‚úÖ <strong>Komoot Compatible:</strong> Import merged routes directly into Komoot for navigation</li>
                        <li>‚úÖ <strong>Multi-Device Support:</strong> Combine tracks from Garmin, Wahoo, Polar, and more</li>
                        <li>‚úÖ <strong>FIT to GPX:</strong> Automatically converts FIT files to GPX format</li>
                    </ul>
                </div>
                
                <div class="card bg-white/90 rounded-2xl p-6 shadow-lg border border-amber-100">
                    <h3 class="text-xl font-bold text-rose-700 mb-4">üó∫Ô∏è Common Use Cases</h3>
                    <ul class="space-y-2 text-amber-700">
                        <li>üîÑ <strong>Multi-day Tours:</strong> Combine daily segments into complete route</li>
                        <li>üì± <strong>Device Switching:</strong> Merge tracks when switching between devices</li>
                        <li>‚ö° <strong>Battery Died:</strong> Combine partial tracks from backup devices</li>
                        <li>üèÉ <strong>Split Activities:</strong> Merge running/cycling segments with breaks</li>
                    </ul>
                </div>
            </div>
            
            <div class="card bg-white/90 rounded-2xl p-6 mt-8 shadow-lg border border-amber-100 text-center">
                <h3 class="text-xl font-bold text-rose-700 mb-4">üîí Privacy & Security</h3>
                <p class="text-amber-700 mb-4">
                    Your GPS data never leaves our secure servers. Files are processed in memory and immediately deleted. 
                    We only log anonymous usage statistics - no personal data or track content is stored.
                </p>
                <div class="flex flex-wrap justify-center gap-4 text-sm text-teal-600">
                    <span class="bg-teal-50 px-3 py-1 rounded-full">üîí HTTPS Encrypted</span>
                    <span class="bg-teal-50 px-3 py-1 rounded-full">üóëÔ∏è Auto-Delete Files</span>
                    <span class="bg-teal-50 px-3 py-1 rounded-full">üö´ No Data Storage</span>
                    <span class="bg-teal-50 px-3 py-1 rounded-full">üìä Anonymous Logs Only</span>
                </div>
            </div>
        </div>
    </main>
    <footer class="text-center text-amber-700 text-xs p-4">&copy; 2025 GPX Combiner &mdash; <a href="https://www.twankerkhof.nl" class="underline hover:text-rose-600" target="_blank" rel="noopener noreferrer" title="Twan's personal website">Twan Kerkhof</a></footer>
    <script defer src="/static/script.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-36840CE8FY"></script>
    
    <!-- Performance monitoring and future PWA support -->
    <script>
        // Monitor performance
        if ('performance' in window && 'measure' in performance) {
            window.addEventListener('load', () => {
                setTimeout(() => {
                    const perfData = performance.getEntriesByType('navigation')[0];
                    if (perfData && gtag) {
                        gtag('event', 'page_load_time', {
                            event_category: 'Performance',
                            value: Math.round(perfData.loadEventEnd - perfData.fetchStart)
                        });
                    }
                }, 0);
            });
        }
    </script>
</body>
</html> 